<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Treats Outliers in Numerical Data — treat_outliers • ExPanDaR</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Treats Outliers in Numerical Data — treat_outliers" />

<meta property="og:description" content="Treats numerical outliers either by winsorizing or by truncating." />

<meta property="og:image" content="/logo.png" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-119053376-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-119053376-1');
</script>

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ExPanDaR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.5.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">ExPanD</li>
    <li>
      <a href="../articles/use_ExPanD.html">Using ExPanD for Panel Data Exploration</a>
    </li>
    <li>
      <a href="../articles/customize_ExPanD.html">Customize ExPanD</a>
    </li>
    <li>
      <a href="../articles/ExPanD_notebook.html">Using the ExPanD Notebook function</a>
    </li>
    <li class="divider"></li>
    <li class="dropdown-header">'ExPanDaR' functions</li>
    <li>
      <a href="../articles/ExPanDaR-functions.html">Using the functions of the 'ExPanDaR' package</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://www.github.com/joachim-gassen/ExPanDaR">
    <span class="fa fa-github"></span>
     
    Code repository
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Treats Outliers in Numerical Data</h1>
    
    <div class="hidden name"><code>treat_outliers.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Treats numerical outliers either by winsorizing or by truncating.</p>
    
    </div>

    <pre class="usage"><span class='fu'>treat_outliers</span>(<span class='no'>x</span>, <span class='kw'>percentile</span> <span class='kw'>=</span> <span class='fl'>0.01</span>, <span class='kw'>truncate</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Data that is coercible into a numeric vector or matrix.
If it is a data frame then all numerical variables
of the data frame are coerced into a matrix.</p></td>
    </tr>
    <tr>
      <th>percentile</th>
      <td><p>A numeric scalar.
  The percentile below which observations
  are considered to be outliers. Is treated symmetrical so that
<code><a href='https://www.rdocumentation.org/packages/base/topics/c'>c(percentile, 1-percentile)</a></code> are used as boundaries.
  Defaults to 0.01 and needs to be &gt; 0 and &lt; 0.5.</p></td>
    </tr>
    <tr>
      <th>truncate</th>
      <td><p>A logical scalar. If TRUE then data are truncated
(i.e., set to NA if out of bounds). Defaults to FALSE.</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>NULL or either a factor vector or a character string
identifying a factor variable in the data frame provided by x.
The factor indicated by 'by' is being used to identify groups
by which the outlier treatment is applied. Defaults to NULL (no grouping).
If provided, the resulting vector must not contain NAs and needs to be such so that
<code>length(byvec) == nrows(as.matrix(x))</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional parameters forwarded to <a href='https://www.rdocumentation.org/packages/stats/topics/quantile'>quantile</a> (notably, <code>type</code>)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A numeric vector or matrix containing the outlier-treated <code>x</code>.
  if a data frame was provided in <code>x</code>, a data frame with its numeric variables
  replaced by their outlier-treated values.</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>All members of the numerical matrix are checked for finiteness and are
  set to NA if they are not finite. NAs are removed when calculating the outlier cut-offs.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'>treat_outliers</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='fl'>1</span>:<span class='fl'>100</span>), <span class='fl'>0.05</span>)</div><div class='output co'>#&gt;   [1]  5.95  5.95  5.95  5.95  5.95  6.00  7.00  8.00  9.00 10.00 11.00 12.00
#&gt;  [13] 13.00 14.00 15.00 16.00 17.00 18.00 19.00 20.00 21.00 22.00 23.00 24.00
#&gt;  [25] 25.00 26.00 27.00 28.00 29.00 30.00 31.00 32.00 33.00 34.00 35.00 36.00
#&gt;  [37] 37.00 38.00 39.00 40.00 41.00 42.00 43.00 44.00 45.00 46.00 47.00 48.00
#&gt;  [49] 49.00 50.00 51.00 52.00 53.00 54.00 55.00 56.00 57.00 58.00 59.00 60.00
#&gt;  [61] 61.00 62.00 63.00 64.00 65.00 66.00 67.00 68.00 69.00 70.00 71.00 72.00
#&gt;  [73] 73.00 74.00 75.00 76.00 77.00 78.00 79.00 80.00 81.00 82.00 83.00 84.00
#&gt;  [85] 85.00 86.00 87.00 88.00 89.00 90.00 91.00 92.00 93.00 94.00 95.00 95.05
#&gt;  [97] 95.05 95.05 95.05 95.05</div><div class='input'><span class='fu'>treat_outliers</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='fl'>1</span>:<span class='fl'>100</span>), <span class='kw'>truncate</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='fl'>0.05</span>)</div><div class='output co'>#&gt;   [1] NA NA NA NA NA  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
#&gt;  [26] 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50
#&gt;  [51] 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75
#&gt;  [76] 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 NA NA NA NA NA</div><div class='input'>
<span class='co'># When you like the percentiles calculated like STATA's summary or pctile:</span>
<span class='fu'>treat_outliers</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='fl'>1</span>:<span class='fl'>100</span>), <span class='fl'>0.05</span>, <span class='kw'>type</span> <span class='kw'>=</span> <span class='fl'>2</span>)</div><div class='output co'>#&gt;   [1]  5.5  5.5  5.5  5.5  5.5  6.0  7.0  8.0  9.0 10.0 11.0 12.0 13.0 14.0 15.0
#&gt;  [16] 16.0 17.0 18.0 19.0 20.0 21.0 22.0 23.0 24.0 25.0 26.0 27.0 28.0 29.0 30.0
#&gt;  [31] 31.0 32.0 33.0 34.0 35.0 36.0 37.0 38.0 39.0 40.0 41.0 42.0 43.0 44.0 45.0
#&gt;  [46] 46.0 47.0 48.0 49.0 50.0 51.0 52.0 53.0 54.0 55.0 56.0 57.0 58.0 59.0 60.0
#&gt;  [61] 61.0 62.0 63.0 64.0 65.0 66.0 67.0 68.0 69.0 70.0 71.0 72.0 73.0 74.0 75.0
#&gt;  [76] 76.0 77.0 78.0 79.0 80.0 81.0 82.0 83.0 84.0 85.0 86.0 87.0 88.0 89.0 90.0
#&gt;  [91] 91.0 92.0 93.0 94.0 95.0 95.5 95.5 95.5 95.5 95.5</div><div class='input'>
<span class='no'>df</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/data.frame'>data.frame</a></span>(<span class='kw'>a</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='fl'>1</span>:<span class='fl'>1000</span>), <span class='kw'>b</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Normal'>rnorm</a></span>(<span class='fl'>1000</span>), <span class='kw'>c</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/sample'>sample</a></span>(<span class='no'>LETTERS</span>[<span class='fl'>1</span>:<span class='fl'>5</span>], <span class='fl'>1000</span>, <span class='kw'>replace</span><span class='kw'>=</span><span class='fl'>TRUE</span>))
<span class='no'>winsorized_df</span> <span class='kw'>&lt;-</span> <span class='fu'>treat_outliers</span>(<span class='no'>df</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='no'>df</span>)</div><div class='output co'>#&gt;        a                b             c      
#&gt;  Min.   :   1.0   Min.   :-2.938978   A:211  
#&gt;  1st Qu.: 250.8   1st Qu.:-0.686197   B:196  
#&gt;  Median : 500.5   Median : 0.008579   C:195  
#&gt;  Mean   : 500.5   Mean   : 0.004340   D:188  
#&gt;  3rd Qu.: 750.2   3rd Qu.: 0.666959   E:210  
#&gt;  Max.   :1000.0   Max.   : 2.755418          </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/summary'>summary</a></span>(<span class='no'>winsorized_df</span>)</div><div class='output co'>#&gt;        a                b             c      
#&gt;  Min.   : 10.99   Min.   :-2.291499   A:211  
#&gt;  1st Qu.:250.75   1st Qu.:-0.686197   B:196  
#&gt;  Median :500.50   Median : 0.008579   C:195  
#&gt;  Mean   :500.50   Mean   : 0.003761   D:188  
#&gt;  3rd Qu.:750.25   3rd Qu.: 0.666959   E:210  
#&gt;  Max.   :990.01   Max.   : 2.223346          </div><div class='input'>
<span class='no'>winsorized_df</span> <span class='kw'>&lt;-</span> <span class='fu'>treat_outliers</span>(<span class='no'>df</span>, <span class='fl'>0.05</span>, <span class='kw'>by</span><span class='kw'>=</span><span class='st'>"c"</span>)
<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/by'>by</a></span>(<span class='no'>df</span>, <span class='no'>df</span>$<span class='no'>c</span>, <span class='no'>summary</span>)</div><div class='output co'>#&gt; df$c: A
#&gt;        a               b            c      
#&gt;  Min.   :  1.0   Min.   :-2.93898   A:211  
#&gt;  1st Qu.:195.5   1st Qu.:-0.67253   B:  0  
#&gt;  Median :424.0   Median : 0.05836   C:  0  
#&gt;  Mean   :454.5   Mean   :-0.01647   D:  0  
#&gt;  3rd Qu.:714.5   3rd Qu.: 0.62014   E:  0  
#&gt;  Max.   :997.0   Max.   : 2.65490          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: B
#&gt;        a               b            c      
#&gt;  Min.   :  4.0   Min.   :-2.64521   A:  0  
#&gt;  1st Qu.:316.0   1st Qu.:-0.65723   B:196  
#&gt;  Median :514.5   Median :-0.03952   C:  0  
#&gt;  Mean   :522.3   Mean   : 0.05547   D:  0  
#&gt;  3rd Qu.:743.5   3rd Qu.: 0.69145   E:  0  
#&gt;  Max.   :998.0   Max.   : 2.75542          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: C
#&gt;        a               b            c      
#&gt;  Min.   : 17.0   Min.   :-2.49536   A:  0  
#&gt;  1st Qu.:265.5   1st Qu.:-0.85995   B:  0  
#&gt;  Median :508.0   Median : 0.00851   C:195  
#&gt;  Mean   :514.1   Mean   :-0.03429   D:  0  
#&gt;  3rd Qu.:752.0   3rd Qu.: 0.81945   E:  0  
#&gt;  Max.   :986.0   Max.   : 2.15876          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: D
#&gt;        a               b            c      
#&gt;  Min.   :  7.0   Min.   :-2.80801   A:  0  
#&gt;  1st Qu.:240.8   1st Qu.:-0.56325   B:  0  
#&gt;  Median :489.0   Median : 0.07030   C:  0  
#&gt;  Mean   :488.9   Mean   : 0.04557   D:188  
#&gt;  3rd Qu.:727.5   3rd Qu.: 0.64076   E:  0  
#&gt;  Max.   :994.0   Max.   : 2.48082          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: E
#&gt;        a                b            c      
#&gt;  Min.   :   2.0   Min.   :-2.39020   A:  0  
#&gt;  1st Qu.: 264.5   1st Qu.:-0.71428   B:  0  
#&gt;  Median : 538.0   Median :-0.07711   C:  0  
#&gt;  Mean   : 524.2   Mean   :-0.02350   D:  0  
#&gt;  3rd Qu.: 797.2   3rd Qu.: 0.64704   E:210  
#&gt;  Max.   :1000.0   Max.   : 2.69237          </div><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/by'>by</a></span>(<span class='no'>winsorized_df</span>, <span class='no'>df</span>$<span class='no'>c</span>, <span class='no'>summary</span>)</div><div class='output co'>#&gt; df$c: A
#&gt;        a               b            c      
#&gt;  Min.   : 34.0   Min.   :-1.86553   A:211  
#&gt;  1st Qu.:195.5   1st Qu.:-0.67253   B:  0  
#&gt;  Median :424.0   Median : 0.05836   C:  0  
#&gt;  Mean   :453.8   Mean   :-0.01338   D:  0  
#&gt;  3rd Qu.:714.5   3rd Qu.: 0.62014   E:  0  
#&gt;  Max.   :943.5   Max.   : 1.65662          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: B
#&gt;        a               b            c      
#&gt;  Min.   : 71.0   Min.   :-1.49200   A:  0  
#&gt;  1st Qu.:316.0   1st Qu.:-0.65723   B:196  
#&gt;  Median :514.5   Median :-0.03952   C:  0  
#&gt;  Mean   :523.5   Mean   : 0.05128   D:  0  
#&gt;  3rd Qu.:743.5   3rd Qu.: 0.69145   E:  0  
#&gt;  Max.   :964.5   Max.   : 1.80135          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: C
#&gt;        a               b            c      
#&gt;  Min.   : 89.7   Min.   :-1.78623   A:  0  
#&gt;  1st Qu.:265.5   1st Qu.:-0.85995   B:  0  
#&gt;  Median :508.0   Median : 0.00851   C:195  
#&gt;  Mean   :515.5   Mean   :-0.03373   D:  0  
#&gt;  3rd Qu.:752.0   3rd Qu.: 0.81945   E:  0  
#&gt;  Max.   :950.9   Max.   : 1.67637          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: D
#&gt;        a                b            c      
#&gt;  Min.   : 51.35   Min.   :-1.47564   A:  0  
#&gt;  1st Qu.:240.75   1st Qu.:-0.56325   B:  0  
#&gt;  Median :489.00   Median : 0.07030   C:  0  
#&gt;  Mean   :488.28   Mean   : 0.04023   D:188  
#&gt;  3rd Qu.:727.50   3rd Qu.: 0.64076   E:  0  
#&gt;  Max.   :933.25   Max.   : 1.47381          
#&gt; ------------------------------------------------------------ 
#&gt; df$c: E
#&gt;        a               b            c      
#&gt;  Min.   : 52.6   Min.   :-1.49300   A:  0  
#&gt;  1st Qu.:264.5   1st Qu.:-0.71428   B:  0  
#&gt;  Median :538.0   Median :-0.07711   C:  0  
#&gt;  Mean   :523.9   Mean   :-0.03049   D:  0  
#&gt;  3rd Qu.:797.2   3rd Qu.: 0.64704   E:210  
#&gt;  Max.   :944.6   Max.   : 1.53394          </div><div class='input'>
<span class='fu'><a href='https://www.rdocumentation.org/packages/graphics/topics/hist'>hist</a></span>(<span class='fu'>treat_outliers</span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/stats/topics/Normal'>rnorm</a></span>(<span class='fl'>1000</span>)), <span class='kw'>breaks</span><span class='kw'>=</span><span class='fl'>100</span>)</div><div class='img'><img src='treat_outliers-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Joachim Gassen.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

